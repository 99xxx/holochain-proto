#!/bin/bash
pkill hcdev
rm benchmark.out
rm benchmark.error.out
hcdev $@  > benchmark.out 2> benchmark.error.out &
while [ true ]
do
	clear
	date
	ps -e -m -o "comm cputime rss" | grep "hcdev" | grep -v "grep"

	read -t 1 -n 1 key

    if [[ $key = q ]]
    then
        break
    fi	

    grep "hcdev complete\!" benchmark.out

	if [ $? -eq 0 ] 
	then 
		break
	fi 	

done
clear
echo -e "Final:"
ps -e -m -o "comm cputime rss" | grep "hcdev" | grep -v "grep"
echo ""
pkill hcdev
